{"ast":null,"code":"var _jsxFileName = \"D:\\\\git_demo\\\\mall-demo\\\\shopping_mall\\\\src\\\\component\\\\AddVarieties.jsx\",\n  _s = $RefreshSig$();\nimport React, { forwardRef, useState, useImperativeHandle } from 'react';\nimport { Modal, Form, Input, message } from 'antd';\nimport { addCategroy } from '../api/Commodity';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction AddVarieties(_ref, ref) {\n  _s();\n  let {\n    getTypeList\n  } = _ref;\n  // 是否开启弹窗\n  const [obj, setObj] = useState({\n    open: false,\n    confirmLoading: false,\n    modalInput: '',\n    title: '一级分类',\n    parentId: ''\n  });\n  const [messageApi, contextHolder] = message.useMessage();\n  // 开启弹窗\n  const showModal = (res, id) => {\n    setObj({\n      ...obj,\n      open: true,\n      title: res,\n      parentId: id\n    });\n  };\n  // 取消按钮回调\n  const handleCancel = () => {\n    setObj({\n      ...obj,\n      open: false\n    });\n  };\n  const success = () => {\n    messageApi.open({\n      type: 'success',\n      content: 'This is a success message'\n    });\n  };\n  const handleOk = () => {\n    addCategroy({\n      name: obj.modalInput,\n      type: obj.title,\n      parentId: obj.parentId\n    }).then(res => {\n      console.log(res);\n      if (res.code == 1) {\n        setObj({\n          ...obj,\n          open: false\n        });\n        success();\n        getTypeList();\n      }\n    });\n  };\n  // 将子组件方法或数据返回到父组件\n  useImperativeHandle(ref, () => {\n    return {\n      showModal\n    };\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(Modal, {\n      title: obj.title,\n      open: obj.open,\n      onOk: handleOk,\n      confirmLoading: obj.confirmLoading,\n      onCancel: handleCancel,\n      cancelText: \"\\u53D6\\u6D88\",\n      okText: \"\\u786E\\u5B9A\",\n      children: /*#__PURE__*/_jsxDEV(Form, {\n        name: \"basic\",\n        labelCol: {\n          span: 4\n        },\n        wrapperCol: {\n          span: 20\n        },\n        style: {\n          maxWidth: 600\n        },\n        initialValues: {\n          remember: true\n        },\n        autoComplete: \"off\",\n        children: /*#__PURE__*/_jsxDEV(Form.Item, {\n          label: \"\\u7C7B\\u522B\\u540D\\u79F0\",\n          name: \"categoryName\",\n          rules: [{\n            required: true,\n            message: '请输入类别名称'\n          }],\n          children: /*#__PURE__*/_jsxDEV(Input, {\n            value: obj.modalInput,\n            onChange: e => setObj({\n              ...obj,\n              modalInput: e.target.value\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 49,\n    columnNumber: 9\n  }, this);\n}\n_s(AddVarieties, \"hicSU55BymIGnU+v56XsGkrRvfc=\", false, function () {\n  return [message.useMessage];\n});\n_c = AddVarieties;\nexport default _c2 = /*#__PURE__*/forwardRef(AddVarieties);\nvar _c, _c2;\n$RefreshReg$(_c, \"AddVarieties\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"names":["React","forwardRef","useState","useImperativeHandle","Modal","Form","Input","message","addCategroy","AddVarieties","ref","getTypeList","obj","setObj","open","confirmLoading","modalInput","title","parentId","messageApi","contextHolder","useMessage","showModal","res","id","handleCancel","success","type","content","handleOk","name","then","console","log","code","span","maxWidth","remember","required","e","target","value"],"sources":["D:/git_demo/mall-demo/shopping_mall/src/component/AddVarieties.jsx"],"sourcesContent":["import React, { forwardRef, useState, useImperativeHandle } from 'react'\r\nimport { Modal, Form, Input,message } from 'antd';\r\nimport { addCategroy } from '../api/Commodity';\r\nfunction AddVarieties({getTypeList}, ref) {\r\n    // 是否开启弹窗\r\n    const [obj, setObj] = useState({\r\n        open: false,\r\n        confirmLoading: false,\r\n        modalInput: '',\r\n        title: '一级分类',\r\n        parentId: ''\r\n    });\r\n    const [messageApi, contextHolder] = message.useMessage();\r\n    // 开启弹窗\r\n    const showModal = (res, id) => {\r\n        setObj({ ...obj, open: true, title: res, parentId: id });\r\n    };\r\n    // 取消按钮回调\r\n    const handleCancel = () => {\r\n        setObj({ ...obj, open: false });\r\n    };\r\n    const success = () => {\r\n        messageApi.open({\r\n          type: 'success',\r\n          content: 'This is a success message',\r\n        });\r\n      };\r\n    const handleOk = () => {\r\n        addCategroy({\r\n            name: obj.modalInput,\r\n            type: obj.title,\r\n            parentId: obj.parentId\r\n        }).then(res => {\r\n            console.log(res);\r\n            if (res.code == 1) {\r\n                setObj({ ...obj, open: false });\r\n                success()\r\n                getTypeList()\r\n            }\r\n        })\r\n    };\r\n    // 将子组件方法或数据返回到父组件\r\n    useImperativeHandle(ref, () => {\r\n        return {\r\n            showModal\r\n        }\r\n    })\r\n    return (\r\n        <div>\r\n            <Modal\r\n                title={obj.title}\r\n                open={obj.open}\r\n                onOk={handleOk}\r\n                confirmLoading={obj.confirmLoading}\r\n                onCancel={handleCancel}\r\n                cancelText='取消'\r\n                okText='确定'\r\n            >\r\n                <Form\r\n                    name=\"basic\"\r\n                    labelCol={{ span: 4, }}\r\n                    wrapperCol={{ span: 20, }}\r\n                    style={{ maxWidth: 600, }}\r\n                    initialValues={{ remember: true, }}\r\n                    autoComplete=\"off\"\r\n                >\r\n                    <Form.Item\r\n                        label=\"类别名称\"\r\n                        name=\"categoryName\"\r\n                        rules={[\r\n                            {\r\n                                required: true,\r\n                                message: '请输入类别名称',\r\n                            },\r\n                        ]}\r\n                    >\r\n                        <Input value={obj.modalInput} onChange={(e) =>\r\n                            setObj({ ...obj, modalInput: e.target.value })} />\r\n                    </Form.Item>\r\n                </Form>\r\n            </Modal>\r\n        </div>\r\n    )\r\n}\r\nexport default forwardRef(AddVarieties)"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}